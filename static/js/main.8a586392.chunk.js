(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,n){e.exports=n(64)},53:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),s=(n(53),n(20)),c=n(43),l=n(6),u=n(5),d=n(10),m=n(9),p=n(11),h=n(16),g=n.n(h),f=n(27),b=n(30),O=n(94),v=n(85),S=n(28),T=n(29),A={ActionButton:{height:"60px",width:"200px",fontSize:24,backgroundColor:function(e){return e.disabled?S.a[500]:T.a[500]},"&:hover":{backgroundColor:T.a[200]},color:"#fff",fontWeight:"lighter",marginTop:"20px",marginBottom:"60px"}},E=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(v.a,{className:t.ActionButton,onClick:function(){e.props.onAnnotationButtonClicked(e.props.name)},disabled:this.props.disabled},this.props.name)}}]),t}(a.Component),R=Object(O.a)(A)(E),y=n(86),k=n(38),j=n.n(k),_=n(37),w=n.n(_),C={NONE:"NONE",START:"START",STOP:"STOP",PAUSE:"PAUSE",RESUME:"RESUME"},P={token:"unique recording state token"},N=function(){function e(t,n){if(Object(l.a)(this,e),t!==P)throw new Error("RecordingState is an enum and should not be constructed directly; please use an existing RecordingState.* declared in recording_state.es6.js");this._status=n}return Object(u.a)(e,[{key:"isActive",value:function(){return this===e.RECORDING||this===e.PAUSED}},{key:"isRecording",value:function(){return this===e.RECORDING}},{key:"isPaused",value:function(){return this===e.PAUSED}},{key:"isOff",value:function(){return this===e.OFF}},{key:"isStartingOrStopping",value:function(){return this===e.STARTING||this===e.STOPPING}},{key:"start",value:function(){return this===e.OFF?e.STARTING:this}},{key:"stop",value:function(){return this===e.OFF?e.OFF:e.STOPPING}},{key:"pause",value:function(){return e.PAUSED}},{key:"resume",value:function(){return e.RECORDING}},{key:"compareToPrevious",value:function(t){return this===e.STARTING&&t===e.OFF?C.START:this===e.STOPPING&&t!==e.STOPPING?C.STOP:this===e.RECORDING&&t===e.PAUSED?C.RESUME:this===e.PAUSED&&t===e.RECORDING?C.PAUSE:C.NONE}}]),e}();N.OFF=new N(P,"OFF"),N.STARTING=new N(P,"STARTING"),N.RECORDING=new N(P,"RECORDING"),N.PAUSED=new N(P,"PAUSED"),N.STOPPING=new N(P,"STOPPING");var I=N,x=n(19),D=n.n(x),M={RecordingButton:{marginBottom:"70px",backgroundColor:D.a[600],"&:hover":{backgroundColor:D.a[200]},color:"#fff"},RecordingButtonLabel:{height:"30px",width:"30px"}},U=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(y.a,{className:e.RecordingButton,"aria-label":"record",onClick:this.props.onClick},this.props.recordingState===I.RECORDING?r.a.createElement(w.a,{className:e.RecordingButtonLabel}):r.a.createElement(j.a,{className:e.RecordingButtonLabel}))}}]),t}(r.a.Component),B=Object(O.a)(M)(U),G={secondsToTimeString:function(e,t){var n=Math.floor(e/60),a=Math.floor(e%60),r=Math.floor(1e3*e%1e3/10);return a<10&&(a="0"+a),t?"".concat(n,":").concat(a,".").concat(r):"".concat(n,":").concat(a)},getAnnotationForTimestamp:function(e,t){var n=null;return t.forEach(function(t){e<t.timestamp+t.totalDuration/2&&e>t.timestamp-t.totalDuration/2&&(n=t)}),n}},F=3,H=60,z=1e3,W={Scroll:{width:z,overflow:"hidden",direction:"rtl",margin:"20px",alignSelf:"center",alignItems:"center"},Canvas:{float:"right",height:"300px"}},L=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidUpdate=function(e,t){t.audioArray!==n.state.audioArray&&n._draw();var a=e.stream,r=n.props.stream;null==a&&null!=r?(n.audioContext=new(window.AudioContext||window.webkitAudioContext),n.analyser=n.audioContext.createAnalyser(),n.analyser.smoothingTimeConstant=0,n.dataArray=new Uint8Array(n.analyser.frequencyBinCount),r&&(n.source=n.audioContext.createMediaStreamSource(r),n.source.connect(n.analyser)),n.timerID=setInterval(function(){n.props.recordingState===I.RECORDING&&n._onRefreshVisualizer()},H)):a&&null==r&&n.setState({audioArray:[],width:z})},n.componentWillUnmount=function(){clearInterval(n.timerID),n.analyser&&n.analyser.disconnect(),n.source&&n.source.disconnect()},n.stop=function(){clearInterval(n.timerID)},n._onRefreshVisualizer=function(){n.analyser.getByteFrequencyData(n.dataArray);for(var e=0,t=0;t<n.dataArray.length;t++)e+=n.dataArray[t];var a=Object(s.a)(n.state.audioArray),r=n.props.annotations&&G.getAnnotationForTimestamp(n.props.elapsedTimeMs,n.props.annotations);if(null!=r){var o=n.state.audioArray.slice(-r.totalDuration/2/H).map(function(e){return{amplitude:e.amplitude,annotated:!0,timestamp:e.elapsedTimeMs}});a.splice.apply(a,[a.length-o.length,r.totalDuration/2/H].concat(Object(s.a)(o)))}var i=e/n.dataArray.length;n.setState({width:n.state.audioArray.length*F,audioArray:[].concat(Object(s.a)(a),[{amplitude:i,annotated:null!=r,timestamp:n.props.elapsedTimeMs}])})},n._draw=function(){var e=n.canvas.current,t=e.height,a=e.width,r=e.getContext("2d");r.clearRect(0,0,a,t),n.state.audioArray.forEach(function(e,n){var a=2+e.amplitude,o=.2+a/50,i="rgba(244, 67, 54,"+o+")",s="rgba(255, 196, 0,"+o+")";r.fillStyle=e.annotated?s:i,r.fillRect(n*F,t/2-a,.6*F,2*a)})},n.state={audioArray:[],width:0},n.canvas=r.a.createRef(),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.Scroll},r.a.createElement("canvas",{className:e.Canvas,width:this.state.width,ref:this.canvas}))}}]),t}(a.Component),q=Object(O.a)(W)(L),J=function(){function e(t,n){var a=this;Object(l.a)(this,e),this.start=function(){a._recordingStartTimeMs=Date.now(),a._recordingInterval=setInterval(function(){a._onIntervalTick&&a._onIntervalTick(a.getElapsedTimeMs())},a._interval&&a._interval)},this.pause=function(){a._currentRecordingPausedStartTime=Date.now(),a._recordingPausedPeriods[a._currentRecordingPausedStartTime]=null},this.resume=function(){a._recordingPausedPeriods[a._currentRecordingPausedStartTime]=Date.now(),a._currentRecordingPausedStartTime=null},this.stop=function(){clearInterval(a._recordingInterval),a._recordingInterval=null,a._recordingStartTimeMs=null,a._recordingPausedPeriods={},a._currentRecordingPausedStartTime=null},this.isStarted=function(){return a._recordingInterval},this.getElapsedTimeMs=function(){var e=Date.now(),t=Object.keys(a._recordingPausedPeriods).map(function(t){return(a._recordingPausedPeriods[t]||e)-t}).reduce(function(e,t){return e+t},0);return e-a._recordingStartTimeMs-t},this._recordingInterval=null,this._recordingStartTimeMs=null,this._recordingPausedPeriods={},this._currentRecordingPausedStartTime=null,this._onIntervalTick=t,this._interval=n}return Object(u.a)(e,[{key:"setOnIntervalTick",value:function(e){this._onIntervalTick=e}}]),e}(),V=n(39),$=n.n(V),K=function(e){function t(e){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,"Action Item",e,1e4))}return Object(p.a)(t,e),t}(function e(t,n,a){Object(l.a)(this,e),this.id=$.a.v4(),this.timestamp=n,this.totalDuration=a,this.type=t}),Q=n(87),X=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){var e=document.createElement("script");e.src="https://cdn.webrtc-experiment.com/EBML.js",e.async=!0,document.body.appendChild(e)},n.componentDidUpdate=function(){var e=Object(f.a)(g.a.mark(function e(t,a){var r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state.recordingState.compareToPrevious(a.recordingState),e.t0=r,e.next=e.t0===C.START?4:e.t0===C.STOP?13:22;break;case 4:return e.next=6,n._requestPermission();case 6:return o=e.sent,n._recordingTimeManager.start(),n._recorder=new b.RecordRTCPromisesHandler(o,{type:"audio"}),e.next=11,n._recorder.startRecording();case 11:return n.setState({recordingState:I.RECORDING,stream:o}),e.abrupt("break",23);case 13:return e.next=15,n._recorder.stopRecording();case 15:return e.t1=b.getSeekableBlob,e.next=18,n._recorder.getBlob();case 18:return e.t2=e.sent,e.t3=function(e){n._recordingTimeManager.stop(),n._audioAnalyzer.stop(),n.props.onAudioUrlAdded(URL.createObjectURL(e))},(0,e.t1)(e.t2,e.t3),e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n._onMsIntervalTick=function(e){n.setState({elapsedTimeMs:e})},n._toggleRecording=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.state.recordingState===I.RECORDING?n.setState({recordingState:n.state.recordingState.stop()}):n.state.recordingState===I.OFF&&n.setState({recordingState:n.state.recordingState.start()});case 1:case"end":return e.stop()}},e)})),n._requestPermission=Object(f.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),n._onAnnotationButtonClicked=function(){if(n.state.recordingState===I.RECORDING){var e=new K(n.state.elapsedTimeMs);n.props.onAnnotationAdded(e)}},n.state={recordingState:I.OFF,elapsedTimeMs:0,stream:null},n._recordingTimeManager=new J(n._onMsIntervalTick,10),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(Q.a,{container:!0,direction:"column",alignItems:"center",className:t.Grid},r.a.createElement(Q.a,{item:!0},r.a.createElement("h1",{className:t.Duration},G.secondsToTimeString(this.state.elapsedTimeMs/1e3,!1))),r.a.createElement(Q.a,{item:!0},r.a.createElement(B,{onClick:this._toggleRecording,recordingState:this.state.recordingState})),r.a.createElement(Q.a,{item:!0,className:t.AudioContainer},r.a.createElement(q,{ref:function(t){t&&(e._audioAnalyzer=t)},recordingState:this.state.recordingState,stream:this.state.stream,annotations:this.props.annotations,elapsedTimeMs:this.state.elapsedTimeMs})),r.a.createElement(Q.a,{item:!0},r.a.createElement(R,{name:"Action Item",durationSecondsString:"10s",onAnnotationButtonClicked:this._onAnnotationButtonClicked,disabled:null==this.state.stream})))}}]),t}(a.Component),Y=Object(O.a)({Duration:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},Grid:{height:"100%"},AnnotationContainer:{minHeight:"100px"},Annotation:{padding:"8px"},AnnotationIcon:{height:"30px",width:"30px",marginRight:"2px"},AudioContainer:{minHeight:"340px"},AudioPlayer:{width:"800px",marginTop:"100px",marginBottom:"40px"}})(X),Z=n(88),ee=n(92),te=n(91),ne=n(89),ae=n(90),re=n(40),oe=n.n(re),ie=n(41),se=n.n(ie),ce=n(31),le=n.n(ce),ue={Header:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},TableHeader:{color:"#fff",fontSize:20,fontWeight:"lighter"},TableCell:{color:"#fff",fontWeight:"lighter"},ResetButton:{position:"absolute",top:"0px",left:"0px",margin:"30px",backgroundColor:D.a[600],"&:hover":{backgroundColor:D.a[200]},color:"#fff"},PlayButton:{marginLeft:"20px",backgroundColor:le.a[300],"&:hover":{backgroundColor:le.a[500]}}},de=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:e.Header},"Summary"),r.a.createElement(y.a,{className:e.ResetButton,"aria-label":"reset",onClick:this.props.onReset},r.a.createElement(oe.a,{className:e.RecordingButtonLabel})),r.a.createElement(Z.a,null,r.a.createElement(ne.a,{className:e.TableHeader},r.a.createElement(ae.a,null,r.a.createElement(te.a,{className:e.TableHeader},"Type"),r.a.createElement(te.a,{align:"right",className:e.TableHeader},"Time"),r.a.createElement(te.a,{align:"right",className:e.TableHeader},"Duration (s)"))),r.a.createElement(ee.a,null,this.props.annotations.map(function(t){return r.a.createElement(ae.a,{key:t.id},r.a.createElement(te.a,{component:"th",scope:"row",className:e.TableCell},t.type,r.a.createElement(y.a,{size:"small",className:e.PlayButton},r.a.createElement(se.a,null))),r.a.createElement(te.a,{align:"right",className:e.TableCell},G.secondsToTimeString(t.timestamp/1e3,!0)),r.a.createElement(te.a,{align:"right",className:e.TableCell},t.totalDuration/1e3))}))))}}]),t}(a.Component),me=Object(O.a)(ue)(de),pe=n(42),he=n.n(pe),ge=n(93),fe={App:{height:"100%",textAlign:"center",background:he.a[800]}},be=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onAudioUrlAdded=function(e){n.setState({audioUrl:e})},n._onAnnotationAdded=function(e){n.setState(function(t){return Object(c.a)({},t,{annotations:[].concat(Object(s.a)(t.annotations),[e])})})},n._onReset=function(){n.setState({audioUrl:null})},n.state={audioUrl:null,annotations:[]},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ge.a,{className:e.App,maxWidth:!1},null==this.state.audioUrl?r.a.createElement(Y,{annotations:this.state.annotations,onAudioUrlAdded:this._onAudioUrlAdded,onAnnotationAdded:this._onAnnotationAdded}):r.a.createElement(me,{audioUrl:this.state.audioUrl,annotations:this.state.annotations,onReset:this._onReset}))}}]),t}(a.Component),Oe=Object(O.a)(fe)(be);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[48,1,2]]]);
//# sourceMappingURL=main.8a586392.chunk.js.map