(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{61:function(t,e,a){t.exports=a(79)},66:function(t,e,a){},79:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(22),o=a.n(i),s=(a(66),a(23)),c=a(35),l=a(9),u=a(8),d=a(14),m=a(12),h=a(13),p=a(20),g=a.n(p),f=a(36),b=a(39),v=a(82),S=a(102),T=a(103),y=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.classes,n=e.annotationCount;return r.a.createElement(S.a,{color:"primary",badgeContent:n,className:a.Badge},r.a.createElement(T.a,{color:"primary",variant:"contained",className:a.ActionButton,onClick:function(){t.props.onAnnotationButtonClicked(t.props.name)},disabled:this.props.disabled},this.props.name))}}]),e}(n.Component),O=Object(v.a)(function(t){return{ActionButton:{height:"60px",width:"200px",fontSize:24,fontWeight:"lighter"},Badge:{margin:t.spacing(2)}}})(y),E=a(104),A=a(48),R=a.n(A),_=a(47),w=a.n(_),P={NONE:"NONE",START:"START",STOP:"STOP",PAUSE:"PAUSE",RESUME:"RESUME"},j={token:"unique recording state token"},k=function(){function t(e,a){if(Object(l.a)(this,t),e!==j)throw new Error("RecordingState is an enum and should not be constructed directly; please use an existing RecordingState.* declared in recording_state.es6.js");this._status=a}return Object(u.a)(t,[{key:"isActive",value:function(){return this===t.RECORDING||this===t.PAUSED}},{key:"isRecording",value:function(){return this===t.RECORDING}},{key:"isPaused",value:function(){return this===t.PAUSED}},{key:"isOff",value:function(){return this===t.OFF}},{key:"isStartingOrStopping",value:function(){return this===t.STARTING||this===t.STOPPING}},{key:"start",value:function(){return this===t.OFF?t.STARTING:this}},{key:"stop",value:function(){return this===t.OFF?t.OFF:t.STOPPING}},{key:"pause",value:function(){return t.PAUSED}},{key:"resume",value:function(){return t.RECORDING}},{key:"compareToPrevious",value:function(e){return this===t.STARTING&&e===t.OFF?P.START:this===t.STOPPING&&e!==t.STOPPING?P.STOP:this===t.RECORDING&&e===t.PAUSED?P.RESUME:this===t.PAUSED&&e===t.RECORDING?P.PAUSE:P.NONE}}]),t}();k.OFF=new k(j,"OFF"),k.STARTING=new k(j,"STARTING"),k.RECORDING=new k(j,"RECORDING"),k.PAUSED=new k(j,"PAUSED"),k.STOPPING=new k(j,"STOPPING");var x=k,C=a(41),N=a.n(C),I={RecordingButton:{backgroundColor:N.a[600],"&:hover":{backgroundColor:N.a[200]},color:"#fff"},RecordingButtonLabel:{height:"30px",width:"30px"}},D=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.classes;return r.a.createElement(E.a,{className:t.RecordingButton,"aria-label":"record",onClick:this.props.onClick},this.props.recordingState===x.RECORDING?r.a.createElement(w.a,{className:t.RecordingButtonLabel}):r.a.createElement(R.a,{className:t.RecordingButtonLabel}))}}]),e}(r.a.Component),M=Object(v.a)(I)(D),U=a(49),B={secondsToTimeString:function(t,e){var a=Math.floor(t/60),n=Math.floor(t%60),r=Math.floor(1e3*t%1e3/10);return n<10&&(n="0"+n),e?"".concat(a,":").concat(n,".").concat(r):"".concat(a,":").concat(n)},getAnnotationsForTimestamp:function(t,e){var a=[];return e.forEach(function(e){t<e.timestamp+e.totalDuration/2&&t>e.timestamp-e.totalDuration/2&&a.push(e)}),a}},F=60,G=6,z=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t))).componentDidUpdate=function(t,e){a.canvas&&a.canvas.current&&requestAnimationFrame(a._draw);var n=t.stream,r=a.props.stream;null==n&&null!=r?(a.audioContext=new(window.AudioContext||window.webkitAudioContext),a.analyser=a.audioContext.createAnalyser(),a.analyser.smoothingTimeConstant=0,a.dataArray=new Uint8Array(a.analyser.frequencyBinCount),r&&(a.source=a.audioContext.createMediaStreamSource(r),a.source.connect(a.analyser)),a.timerID=setInterval(function(){a.props.recordingState===x.RECORDING&&a._onRefreshVisualizer()},F)):n&&null==r&&a.setState(function(t){return Object(c.a)({},t,{audioArray:[]})},function(){console.log("WHY"),a._draw()}),e.canvasSize.width<0&&a.state.canvasSize.width>0&&a.canvas.current.addEventListener("mousemove",function(t){var e=t.target.getBoundingClientRect();a.setState({mousePosition:{x:t.clientX-e.left,y:t.clientY-e.top}})})},a.componentWillUnmount=function(){clearInterval(a.timerID),cancelAnimationFrame(a._draw),a.analyser&&a.analyser.disconnect(),a.source&&a.source.disconnect()},a.stop=function(){clearInterval(a.timerID)},a._onRefreshVisualizer=function(){a.analyser.getByteFrequencyData(a.dataArray);for(var t=0,e=0;e<a.dataArray.length;e++)t+=a.dataArray[e];var n=t/a.dataArray.length;a.setState(function(t){var e=Object(s.a)(t.audioArray);return t.audioArray.length>=Math.floor(t.canvasSize.width/G)&&e.shift(),{audioArray:[].concat(Object(s.a)(e),[{amplitude:n,timestamp:a.props.elapsedTimeMs,x:Math.floor(G*t.audioArray.length)}]),totalArray:[].concat(Object(s.a)(t.totalArray),[{amplitude:n,timestamp:a.props.elapsedTimeMs,x:Math.floor(G*t.audioArray.length)}])}})},a._draw=function(){var t=a.canvas.current;if(t){var e=t.height,n=t.width,r=a.state.audioArray.length,i=t.getContext("2d");i.clearRect(0,0,n,e),0===r?a.state.totalArray.forEach(function(t,r){var o=B.getAnnotationsForTimestamp(t.timestamp,a.props.annotations?a.props.annotations:[]),s=2+t.amplitude,c=a.state.canvasSize.width/a.state.totalArray.length,l="rgba(244, 67, 54,"+(.2+s/50)+")",u="rgba(255, 255, 255, "+o.length/5+")",d={x:n-(a.state.totalArray.length-r)*c,y:e/2-s,width:.6*c,height:2*s};a.state.mousePosition.x>d.x&&a.state.mousePosition.x;i.fillStyle=o.length>0?u:l,i.fillRect(d.x,d.y,d.width,d.height)}):a.state.audioArray.forEach(function(t,o){var s=B.getAnnotationsForTimestamp(t.timestamp,a.props.annotations?a.props.annotations:[]),c=2+t.amplitude,l="rgba(244, 67, 54,"+(.2+c/50)+")",u="rgba(255, 255, 255, "+s.length/5+")",d={x:n-(r-o)*G,y:e/2-c,width:.6*G,height:2*c};a.state.mousePosition.x>d.x&&a.state.mousePosition.x;i.fillStyle=s.length>0?u:l,i.fillRect(d.x,d.y,d.width,d.height)})}},a.state={audioArray:[],mousePosition:{x:0,y:0},canvasSize:{width:-1,height:-1},totalArray:[]},a.canvas=r.a.createRef(),a}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props.classes;return null!=this.state.canvasSize&&r.a.createElement(U.a,{bounds:!0,margin:!0,onResize:function(e){t.setState({canvasSize:e.bounds})}},function(a){var n=a.measureRef;return r.a.createElement("div",{ref:n,className:e.Visualizer},r.a.createElement("canvas",{className:e.Canvas,ref:t.canvas,height:t.state.canvasSize.height,width:t.state.canvasSize.width}))})}}]),e}(n.Component),H=Object(v.a)({Canvas:{display:"block"},Visualizer:{width:"80%",height:"200px",margin:"auto"}})(z),W=function(){function t(e,a){var n=this;Object(l.a)(this,t),this.start=function(){n._recordingStartTimeMs=Date.now(),n._recordingInterval=setInterval(function(){n._onIntervalTick&&n._onIntervalTick(n.getElapsedTimeMs())},n._interval&&n._interval)},this.pause=function(){n._currentRecordingPausedStartTime=Date.now(),n._recordingPausedPeriods[n._currentRecordingPausedStartTime]=null},this.resume=function(){n._recordingPausedPeriods[n._currentRecordingPausedStartTime]=Date.now(),n._currentRecordingPausedStartTime=null},this.stop=function(){clearInterval(n._recordingInterval),n._recordingInterval=null,n._recordingStartTimeMs=null,n._recordingPausedPeriods={},n._currentRecordingPausedStartTime=null},this.isStarted=function(){return n._recordingInterval},this.getElapsedTimeMs=function(){var t=Date.now(),e=Object.keys(n._recordingPausedPeriods).map(function(e){return(n._recordingPausedPeriods[e]||t)-e}).reduce(function(t,e){return t+e},0);return t-n._recordingStartTimeMs-e},this._recordingInterval=null,this._recordingStartTimeMs=null,this._recordingPausedPeriods={},this._currentRecordingPausedStartTime=null,this._onIntervalTick=e,this._interval=a}return Object(u.a)(t,[{key:"setOnIntervalTick",value:function(t){this._onIntervalTick=t}}]),t}(),L=a(51),q=a.n(L),V=function(t){function e(t){return Object(l.a)(this,e),Object(d.a)(this,Object(m.a)(e).call(this,"Action Item",t,1e4))}return Object(h.a)(e,t),e}(function t(e,a,n){var r=this;Object(l.a)(this,t),this.getStartTimeMs=function(){return r.timestamp-r.totalDuration/2},this.getEndTimeMs=function(){return r.timestamp+r.totalDuration/2},this.id=q.a.v4(),this.timestamp=a,this.totalDuration=n,this.type=e}),J=a(112),Y=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t))).componentDidMount=function(){var t=document.createElement("script");t.src="https://cdn.webrtc-experiment.com/EBML.js",t.async=!0,document.body.appendChild(t)},a.componentDidUpdate=function(){var t=Object(f.a)(g.a.mark(function t(e,n){var r,i;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=a.state.recordingState.compareToPrevious(n.recordingState),t.t0=r,t.next=t.t0===P.START?4:t.t0===P.STOP?13:23;break;case 4:return t.next=6,a._requestPermission();case 6:return i=t.sent,a._recordingTimeManager.start(),a._recorder=new b.RecordRTCPromisesHandler(i,{type:"audio"}),t.next=11,a._recorder.startRecording();case 11:return a.setState({recordingState:x.RECORDING,stream:i}),t.abrupt("break",24);case 13:return t.next=15,a._recorder.stopRecording();case 15:return t.t1=b.getSeekableBlob,t.next=18,a._recorder.getBlob();case 18:return t.t2=t.sent,t.t3=function(t){a._recordingTimeManager.stop(),a._audioAnalyzer.stop(),a.props.onAudioUrlAdded(URL.createObjectURL(t))},(0,t.t1)(t.t2,t.t3),a.setState({recordingState:x.OFF,stream:null}),t.abrupt("break",24);case 23:return t.abrupt("break",24);case 24:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),a._onMsIntervalTick=function(t){a.setState({elapsedTimeMs:t})},a._toggleRecording=Object(f.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.state.recordingState===x.RECORDING?a.setState({recordingState:a.state.recordingState.stop()}):a.state.recordingState===x.OFF&&a.setState({recordingState:a.state.recordingState.start()});case 1:case"end":return t.stop()}},t)})),a._requestPermission=Object(f.a)(g.a.mark(function t(){var e;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t)})),a._onAnnotationButtonClicked=function(){if(a.state.recordingState===x.RECORDING){var t=new V(a.state.elapsedTimeMs);a.props.onAnnotationAdded(t)}},a.state={recordingState:x.OFF,elapsedTimeMs:0,stream:null},a._recordingTimeManager=new W(a._onMsIntervalTick,10),a}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props.classes;return r.a.createElement(J.a,{display:"flex",flexDirection:"column",justifyContent:"center",className:e.Container},r.a.createElement(J.a,null,r.a.createElement("h1",{className:e.Duration},B.secondsToTimeString(this.state.elapsedTimeMs/1e3,!1))),r.a.createElement(J.a,null,r.a.createElement(M,{onClick:this._toggleRecording,recordingState:this.state.recordingState})),r.a.createElement(J.a,{flexGrow:1,justifyContent:"center",display:"flex",flexDirection:"column"},r.a.createElement(J.a,null,r.a.createElement(H,{ref:function(e){e&&(t._audioAnalyzer=e)},recordingState:this.state.recordingState,stream:this.state.stream,annotations:this.props.annotations,elapsedTimeMs:this.state.elapsedTimeMs}))),r.a.createElement(J.a,{className:e.ActionButton},r.a.createElement(O,{name:"Action Item",onAnnotationButtonClicked:this._onAnnotationButtonClicked,annotationCount:this.props.annotations.length,disabled:null==this.state.stream})))}}]),e}(n.Component),X=Object(v.a)(function(t){return{Duration:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},Visualizer:{width:"80%",height:"20%"},Container:{height:"100%"},Annotation:{padding:"8px"},AnnotationIcon:{height:"30px",width:"30px",marginRight:"2px"},ActionButton:{marginBottom:"40px"}}})(Y),$=a(52),K=a.n($),Q=a(105),Z=a(109),tt=a(108),et=a(106),at=a(107),nt=a(53),rt=a.n(nt),it=a(54),ot=a.n(it),st=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t)))._onAnnotationPlayed=function(t){a._audioPlayer&&(a._audioPlayer.current.audioEl.currentTime=t.getStartTimeMs()/1e3,a._audioPlayer.current.audioEl.play())},a._audioPlayer=r.a.createRef(),a}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.classes,n=e.audioUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:a.Header},"Summary"),r.a.createElement(K.a,{ref:this._audioPlayer,className:a.AudioPlayer,controls:!0,src:n}),r.a.createElement(E.a,{color:"primary",className:a.ResetButton,"aria-label":"reset",onClick:this.props.onReset},r.a.createElement(rt.a,{className:a.RecordingButtonLabel})),r.a.createElement(Q.a,null,r.a.createElement(et.a,{className:a.TableHeader},r.a.createElement(at.a,null,r.a.createElement(tt.a,{className:a.TableHeader}),r.a.createElement(tt.a,{className:a.TableHeader,align:"right"},"Type"),r.a.createElement(tt.a,{align:"right",className:a.TableHeader},"Start Time"),r.a.createElement(tt.a,{align:"right",className:a.TableHeader},"End Time"),r.a.createElement(tt.a,{align:"right",className:a.TableHeader},"Duration (s)"))),r.a.createElement(Z.a,null,this.props.annotations&&this.props.annotations.map(function(e){return r.a.createElement(at.a,{key:e.id},r.a.createElement(tt.a,{component:"th",scope:"row",className:a.TableCell},r.a.createElement(E.a,{size:"small",onClick:function(){t._onAnnotationPlayed(e)}},r.a.createElement(ot.a,null))),r.a.createElement(tt.a,{component:"th",scope:"row",align:"right",className:a.TableCell},e.type),r.a.createElement(tt.a,{align:"right",className:a.TableCell},B.secondsToTimeString(e.getStartTimeMs()>0?e.getStartTimeMs()/1e3:0,!0)),r.a.createElement(tt.a,{align:"right",className:a.TableCell},B.secondsToTimeString(e.getEndTimeMs()/1e3,!0)),r.a.createElement(tt.a,{align:"right",className:a.TableCell},e.totalDuration/1e3))}))))}}]),e}(n.Component),ct=Object(v.a)({Header:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},TableHeader:{color:"#fff",fontSize:20,fontWeight:"lighter"},TableCell:{color:"#fff",fontWeight:"lighter"},ResetButton:{position:"absolute",top:"0px",left:"0px",margin:"30px",color:"#fff"},AudioPlayer:{margin:"20px",width:"80%"}})(st),lt=a(37),ut=a(110),dt=a(55),mt=a(111),ht=Object(dt.a)({palette:{primary:{main:"#e53935"},secondary:lt.a,type:"dark"}}),pt={App:{height:"100%",textAlign:"center",background:ht.palette.background.default}},gt=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t)))._onAudioUrlAdded=function(t){a.setState({audioUrl:t})},a._onAnnotationAdded=function(t){a.setState(function(e){return console.log(e),Object(c.a)({},e,{annotations:[].concat(Object(s.a)(e.annotations),[t])})})},a._onReset=function(){a.setState({audioUrl:null,annotations:[]})},a.state={audioUrl:null,annotations:[]},a}return Object(h.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.classes;return r.a.createElement(ut.a,{theme:ht},r.a.createElement(mt.a,{className:t.App,maxWidth:!1},null==this.state.audioUrl?r.a.createElement(X,{annotations:this.state.annotations,onAudioUrlAdded:this._onAudioUrlAdded,onAnnotationAdded:this._onAnnotationAdded}):r.a.createElement(ct,{audioUrl:this.state.audioUrl,annotations:this.state.annotations,onReset:this._onReset})))}}]),e}(n.Component),ft=Object(v.a)(pt)(gt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ft,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[61,1,2]]]);
//# sourceMappingURL=main.e843f6fa.chunk.js.map