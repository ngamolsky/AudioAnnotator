(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{49:function(e,t,n){e.exports=n(67)},54:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),s=(n(54),n(20)),c=n(44),l=n(6),u=n(5),d=n(10),m=n(9),h=n(11),p=n(16),g=n.n(p),f=n(27),b=n(30),v=n(97),S=n(88),T=n(28),O=n(29),E={ActionButton:{height:"60px",width:"200px",fontSize:24,backgroundColor:function(e){return e.disabled?T.a[500]:O.a[500]},"&:hover":{backgroundColor:O.a[200]},color:"#fff",fontWeight:"lighter",marginTop:"20px",marginBottom:"60px"}},A=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(S.a,{className:t.ActionButton,onClick:function(){e.props.onAnnotationButtonClicked(e.props.name)},disabled:this.props.disabled},this.props.name)}}]),t}(a.Component),y=Object(v.a)(E)(A),R=n(89),P=n(38),_=n.n(P),k=n(37),j=n.n(k),C={NONE:"NONE",START:"START",STOP:"STOP",PAUSE:"PAUSE",RESUME:"RESUME"},N={token:"unique recording state token"},w=function(){function e(t,n){if(Object(l.a)(this,e),t!==N)throw new Error("RecordingState is an enum and should not be constructed directly; please use an existing RecordingState.* declared in recording_state.es6.js");this._status=n}return Object(u.a)(e,[{key:"isActive",value:function(){return this===e.RECORDING||this===e.PAUSED}},{key:"isRecording",value:function(){return this===e.RECORDING}},{key:"isPaused",value:function(){return this===e.PAUSED}},{key:"isOff",value:function(){return this===e.OFF}},{key:"isStartingOrStopping",value:function(){return this===e.STARTING||this===e.STOPPING}},{key:"start",value:function(){return this===e.OFF?e.STARTING:this}},{key:"stop",value:function(){return this===e.OFF?e.OFF:e.STOPPING}},{key:"pause",value:function(){return e.PAUSED}},{key:"resume",value:function(){return e.RECORDING}},{key:"compareToPrevious",value:function(t){return this===e.STARTING&&t===e.OFF?C.START:this===e.STOPPING&&t!==e.STOPPING?C.STOP:this===e.RECORDING&&t===e.PAUSED?C.RESUME:this===e.PAUSED&&t===e.RECORDING?C.PAUSE:C.NONE}}]),e}();w.OFF=new w(N,"OFF"),w.STARTING=new w(N,"STARTING"),w.RECORDING=new w(N,"RECORDING"),w.PAUSED=new w(N,"PAUSED"),w.STOPPING=new w(N,"STOPPING");var x=w,I=n(19),D=n.n(I),M={RecordingButton:{marginBottom:"70px",backgroundColor:D.a[600],"&:hover":{backgroundColor:D.a[200]},color:"#fff"},RecordingButtonLabel:{height:"30px",width:"30px"}},U=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(R.a,{className:e.RecordingButton,"aria-label":"record",onClick:this.props.onClick},this.props.recordingState===x.RECORDING?r.a.createElement(j.a,{className:e.RecordingButtonLabel}):r.a.createElement(_.a,{className:e.RecordingButtonLabel}))}}]),t}(r.a.Component),B=Object(v.a)(M)(U),G={secondsToTimeString:function(e,t){var n=Math.floor(e/60),a=Math.floor(e%60),r=Math.floor(1e3*e%1e3/10);return a<10&&(a="0"+a),t?"".concat(n,":").concat(a,".").concat(r):"".concat(n,":").concat(a)},getAnnotationForTimestamp:function(e,t){var n=null;return t.forEach(function(t){e<t.timestamp+t.totalDuration/2&&e>t.timestamp-t.totalDuration/2&&(n=t)}),n}},F=6,H=60,z=1e3,L=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidUpdate=function(e,t){n.canvas&&n.canvas.current&&requestAnimationFrame(n._draw);var a=e.stream,r=n.props.stream;null==a&&null!=r?(n.audioContext=new(window.AudioContext||window.webkitAudioContext),n.analyser=n.audioContext.createAnalyser(),n.analyser.smoothingTimeConstant=0,n.dataArray=new Uint8Array(n.analyser.frequencyBinCount),r&&(n.source=n.audioContext.createMediaStreamSource(r),n.source.connect(n.analyser)),n.timerID=setInterval(function(){n.props.recordingState===x.RECORDING&&n._onRefreshVisualizer()},H)):a&&null==r&&n.setState({audioArray:[]})},n.componentDidMount=function(){n.canvas&&n.canvas.current.addEventListener("mousemove",function(e){var t=e.target.getBoundingClientRect();n.setState({mousePosition:{x:e.clientX-t.left,y:e.clientY-t.top}})})},n.componentWillUnmount=function(){clearInterval(n.timerID),cancelAnimationFrame(n._draw),n.analyser&&n.analyser.disconnect(),n.source&&n.source.disconnect()},n.stop=function(){clearInterval(n.timerID)},n._onRefreshVisualizer=function(){n.analyser.getByteFrequencyData(n.dataArray);for(var e=0,t=0;t<n.dataArray.length;t++)e+=n.dataArray[t];var a=e/n.dataArray.length;n.setState(function(e){var t=Object(s.a)(e.audioArray);n.state.audioArray.length>=Math.floor(z/F)&&t.shift();var r=n.props.annotations&&G.getAnnotationForTimestamp(n.props.elapsedTimeMs,n.props.annotations);if(null!=r){var o=e.audioArray.slice(-r.totalDuration/2/H).map(function(e){return{amplitude:e.amplitude,timestamp:e.timestamp,selected:e.selected,x:e.x,annotated:!0}});t.splice.apply(t,[t.length-o.length,r.totalDuration/2/H].concat(Object(s.a)(o)))}return{audioArray:[].concat(Object(s.a)(t),[{amplitude:a,timestamp:n.props.elapsedTimeMs,x:Math.floor(F*e.audioArray.length),selected:!1,annotated:null!=r}])}})},n._draw=function(){var e=n.canvas.current;if(e){var t=e.height,a=e.width,r=e.getContext("2d");r.clearRect(0,0,a,t),n.state.audioArray.forEach(function(e,a){var o=2+e.amplitude,i=.2+o/50,s="rgba(244, 67, 54,"+i+")",c="rgba(255, 196, 0,"+i+")",l=a*F;n.state.mousePosition.x>l&&n.state.mousePosition.x<l+F?e.selected=!0:e.selected=!1,r.fillStyle=e.selected?"rgb(255, 255, 255)":e.annotated?c:s,r.fillRect(a*F,t/2-o,.6*F,2*o)})}},n.state={audioArray:[],mousePosition:{x:0,y:0}},n.canvas=r.a.createRef(),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvas,height:300,width:z})}}]),t}(a.Component),W=Object(v.a)({})(L),q=function(){function e(t,n){var a=this;Object(l.a)(this,e),this.start=function(){a._recordingStartTimeMs=Date.now(),a._recordingInterval=setInterval(function(){a._onIntervalTick&&a._onIntervalTick(a.getElapsedTimeMs())},a._interval&&a._interval)},this.pause=function(){a._currentRecordingPausedStartTime=Date.now(),a._recordingPausedPeriods[a._currentRecordingPausedStartTime]=null},this.resume=function(){a._recordingPausedPeriods[a._currentRecordingPausedStartTime]=Date.now(),a._currentRecordingPausedStartTime=null},this.stop=function(){clearInterval(a._recordingInterval),a._recordingInterval=null,a._recordingStartTimeMs=null,a._recordingPausedPeriods={},a._currentRecordingPausedStartTime=null},this.isStarted=function(){return a._recordingInterval},this.getElapsedTimeMs=function(){var e=Date.now(),t=Object.keys(a._recordingPausedPeriods).map(function(t){return(a._recordingPausedPeriods[t]||e)-t}).reduce(function(e,t){return e+t},0);return e-a._recordingStartTimeMs-t},this._recordingInterval=null,this._recordingStartTimeMs=null,this._recordingPausedPeriods={},this._currentRecordingPausedStartTime=null,this._onIntervalTick=t,this._interval=n}return Object(u.a)(e,[{key:"setOnIntervalTick",value:function(e){this._onIntervalTick=e}}]),e}(),J=n(39),V=n.n(J),X=function(e){function t(e){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,"Action Item",e,1e4))}return Object(h.a)(t,e),t}(function e(t,n,a){var r=this;Object(l.a)(this,e),this.getStartTimeMs=function(){return r.timestamp-r.totalDuration/2},this.getEndTimeMs=function(){return r.timestamp+r.totalDuration/2},this.id=V.a.v4(),this.timestamp=n,this.totalDuration=a,this.type=t}),Y=n(90),$=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){var e=document.createElement("script");e.src="https://cdn.webrtc-experiment.com/EBML.js",e.async=!0,document.body.appendChild(e)},n.componentDidUpdate=function(){var e=Object(f.a)(g.a.mark(function e(t,a){var r,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state.recordingState.compareToPrevious(a.recordingState),e.t0=r,e.next=e.t0===C.START?4:e.t0===C.STOP?13:22;break;case 4:return e.next=6,n._requestPermission();case 6:return o=e.sent,n._recordingTimeManager.start(),n._recorder=new b.RecordRTCPromisesHandler(o,{type:"audio"}),e.next=11,n._recorder.startRecording();case 11:return n.setState({recordingState:x.RECORDING,stream:o}),e.abrupt("break",23);case 13:return e.next=15,n._recorder.stopRecording();case 15:return e.t1=b.getSeekableBlob,e.next=18,n._recorder.getBlob();case 18:return e.t2=e.sent,e.t3=function(e){n._recordingTimeManager.stop(),n._audioAnalyzer.stop(),n.props.onAudioUrlAdded(URL.createObjectURL(e))},(0,e.t1)(e.t2,e.t3),e.abrupt("break",23);case 22:return e.abrupt("break",23);case 23:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n._onMsIntervalTick=function(e){n.setState({elapsedTimeMs:e})},n._toggleRecording=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.state.recordingState===x.RECORDING?n.setState({recordingState:n.state.recordingState.stop()}):n.state.recordingState===x.OFF&&n.setState({recordingState:n.state.recordingState.start()});case 1:case"end":return e.stop()}},e)})),n._requestPermission=Object(f.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),n._onAnnotationButtonClicked=function(){if(n.state.recordingState===x.RECORDING){var e=new X(n.state.elapsedTimeMs);n.props.onAnnotationAdded(e)}},n.state={recordingState:x.OFF,elapsedTimeMs:0,stream:null},n._recordingTimeManager=new q(n._onMsIntervalTick,10),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(Y.a,{container:!0,direction:"column",alignItems:"center",className:t.Grid},r.a.createElement(Y.a,{item:!0},r.a.createElement("h1",{className:t.Duration},G.secondsToTimeString(this.state.elapsedTimeMs/1e3,!1))),r.a.createElement(Y.a,{item:!0},r.a.createElement(B,{onClick:this._toggleRecording,recordingState:this.state.recordingState})),r.a.createElement(Y.a,{item:!0,className:t.AudioContainer},r.a.createElement(W,{ref:function(t){t&&(e._audioAnalyzer=t)},recordingState:this.state.recordingState,stream:this.state.stream,annotations:this.props.annotations,elapsedTimeMs:this.state.elapsedTimeMs})),r.a.createElement(Y.a,{item:!0},r.a.createElement(y,{name:"Action Item",durationSecondsString:"10s",onAnnotationButtonClicked:this._onAnnotationButtonClicked,disabled:null==this.state.stream})))}}]),t}(a.Component),K=Object(v.a)({Duration:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},Grid:{height:"100%"},AnnotationContainer:{minHeight:"100px"},Annotation:{padding:"8px"},AnnotationIcon:{height:"30px",width:"30px",marginRight:"2px"},AudioContainer:{minHeight:"340px"}})($),Q=n(40),Z=n.n(Q),ee=n(91),te=n(95),ne=n(94),ae=n(92),re=n(93),oe=n(41),ie=n.n(oe),se=n(42),ce=n.n(se),le=n(31),ue=n.n(le),de={Header:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},TableHeader:{color:"#fff",fontSize:20,fontWeight:"lighter"},TableCell:{color:"#fff",fontWeight:"lighter"},ResetButton:{position:"absolute",top:"0px",left:"0px",margin:"30px",backgroundColor:D.a[600],"&:hover":{backgroundColor:D.a[200]},color:"#fff"},PlayButton:{marginLeft:"20px",backgroundColor:ue.a[300],"&:hover":{backgroundColor:ue.a[500]}},AudioPlayer:{margin:"20px",width:"100%"}},me=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onAnnotationPlayed=function(e){n._audioPlayer&&(n._audioPlayer.current.audioEl.currentTime=e.getStartTimeMs()/1e3,n._audioPlayer.current.audioEl.play())},n._audioPlayer=r.a.createRef(),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.audioUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:n.Header},"Summary"),r.a.createElement(Z.a,{ref:this._audioPlayer,className:n.AudioPlayer,controls:!0,src:a}),r.a.createElement(R.a,{className:n.ResetButton,"aria-label":"reset",onClick:this.props.onReset},r.a.createElement(ie.a,{className:n.RecordingButtonLabel})),r.a.createElement(ee.a,null,r.a.createElement(ae.a,{className:n.TableHeader},r.a.createElement(re.a,null,r.a.createElement(ne.a,{className:n.TableHeader},"Type"),r.a.createElement(ne.a,{align:"right",className:n.TableHeader},"Start Time"),r.a.createElement(ne.a,{align:"right",className:n.TableHeader},"End Time"),r.a.createElement(ne.a,{align:"right",className:n.TableHeader},"Duration (s)"))),r.a.createElement(te.a,null,this.props.annotations&&this.props.annotations.map(function(t){return r.a.createElement(re.a,{key:t.id},r.a.createElement(ne.a,{component:"th",scope:"row",className:n.TableCell},t.type,r.a.createElement(R.a,{size:"small",className:n.PlayButton,onClick:function(){e._onAnnotationPlayed(t)}},r.a.createElement(ce.a,null))),r.a.createElement(ne.a,{align:"right",className:n.TableCell},G.secondsToTimeString(t.getStartTimeMs()>0?t.getStartTimeMs()/1e3:0,!0)),r.a.createElement(ne.a,{align:"right",className:n.TableCell},G.secondsToTimeString(t.getEndTimeMs()/1e3,!0)),r.a.createElement(ne.a,{align:"right",className:n.TableCell},t.totalDuration/1e3))}))))}}]),t}(a.Component),he=Object(v.a)(de)(me),pe=n(43),ge=n.n(pe),fe=n(96),be={App:{height:"100%",textAlign:"center",background:ge.a[800]}},ve=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onAudioUrlAdded=function(e){n.setState({audioUrl:e})},n._onAnnotationAdded=function(e){n.setState(function(t){return console.log(t),Object(c.a)({},t,{annotations:[].concat(Object(s.a)(t.annotations),[e])})})},n._onReset=function(){n.setState({audioUrl:null,annotations:[]})},n.state={audioUrl:null,annotations:[]},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(fe.a,{className:e.App,maxWidth:!1},null==this.state.audioUrl?r.a.createElement(K,{annotations:this.state.annotations,onAudioUrlAdded:this._onAudioUrlAdded,onAnnotationAdded:this._onAnnotationAdded}):r.a.createElement(he,{audioUrl:this.state.audioUrl,annotations:this.state.annotations,onReset:this._onReset}))}}]),t}(a.Component),Se=Object(v.a)(be)(ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[49,1,2]]]);
//# sourceMappingURL=main.0bdd0c19.chunk.js.map