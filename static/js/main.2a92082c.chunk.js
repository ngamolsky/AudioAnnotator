(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{61:function(e,t,a){e.exports=a(79)},66:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),o=a.n(i),s=(a(66),a(23)),c=a(35),l=a(9),u=a(8),d=a(14),m=a(12),h=a(13),p=a(20),g=a.n(p),f=a(36),b=a(39),v=a(82),S=a(102),T=a(103),y=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.annotationCount;return r.a.createElement(S.a,{color:"primary",badgeContent:n,className:a.Badge},r.a.createElement(T.a,{color:"primary",variant:"contained",className:a.ActionButton,onClick:function(){e.props.onAnnotationButtonClicked(e.props.name)},disabled:this.props.disabled},this.props.name))}}]),t}(n.Component),O=Object(v.a)(function(e){return{ActionButton:{height:"60px",width:"200px",fontSize:24,fontWeight:"lighter"},Badge:{margin:e.spacing(2)}}})(y),E=a(104),A=a(48),R=a.n(A),w=a(47),P=a.n(w),_={NONE:"NONE",START:"START",STOP:"STOP",PAUSE:"PAUSE",RESUME:"RESUME"},j={token:"unique recording state token"},k=function(){function e(t,a){if(Object(l.a)(this,e),t!==j)throw new Error("RecordingState is an enum and should not be constructed directly; please use an existing RecordingState.* declared in recording_state.es6.js");this._status=a}return Object(u.a)(e,[{key:"isActive",value:function(){return this===e.RECORDING||this===e.PAUSED}},{key:"isRecording",value:function(){return this===e.RECORDING}},{key:"isPaused",value:function(){return this===e.PAUSED}},{key:"isOff",value:function(){return this===e.OFF}},{key:"isStartingOrStopping",value:function(){return this===e.STARTING||this===e.STOPPING}},{key:"start",value:function(){return this===e.OFF?e.STARTING:this}},{key:"stop",value:function(){return this===e.OFF?e.OFF:e.STOPPING}},{key:"pause",value:function(){return e.PAUSED}},{key:"resume",value:function(){return e.RECORDING}},{key:"compareToPrevious",value:function(t){return this===e.STARTING&&t===e.OFF?_.START:this===e.STOPPING&&t!==e.STOPPING?_.STOP:this===e.RECORDING&&t===e.PAUSED?_.RESUME:this===e.PAUSED&&t===e.RECORDING?_.PAUSE:_.NONE}}]),e}();k.OFF=new k(j,"OFF"),k.STARTING=new k(j,"STARTING"),k.RECORDING=new k(j,"RECORDING"),k.PAUSED=new k(j,"PAUSED"),k.STOPPING=new k(j,"STOPPING");var x=k,C=a(41),N=a.n(C),I={RecordingButton:{backgroundColor:N.a[600],"&:hover":{backgroundColor:N.a[200]},color:"#fff"},RecordingButtonLabel:{height:"30px",width:"30px"}},D=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(E.a,{className:e.RecordingButton,"aria-label":"record",onClick:this.props.onClick},this.props.recordingState===x.RECORDING?r.a.createElement(P.a,{className:e.RecordingButtonLabel}):r.a.createElement(R.a,{className:e.RecordingButtonLabel}))}}]),t}(r.a.Component),M=Object(v.a)(I)(D),U=a(49),B={secondsToTimeString:function(e,t){var a=Math.floor(e/60),n=Math.floor(e%60),r=Math.floor(1e3*e%1e3/10);return n<10&&(n="0"+n),t?"".concat(a,":").concat(n,".").concat(r):"".concat(a,":").concat(n)},getAnnotationsForTimestamp:function(e,t){var a=[];return t.forEach(function(t){e<t.timestamp+t.totalDuration/2&&e>t.timestamp-t.totalDuration/2&&a.push(t)}),a}},F=60,G=6,z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidUpdate=function(e,t){a.canvas&&a.canvas.current&&requestAnimationFrame(a._draw);var n=e.stream,r=a.props.stream;null==n&&null!=r?(a.audioContext=new(window.AudioContext||window.webkitAudioContext),a.analyser=a.audioContext.createAnalyser(),a.analyser.smoothingTimeConstant=0,a.dataArray=new Uint8Array(a.analyser.frequencyBinCount),r&&(a.source=a.audioContext.createMediaStreamSource(r),a.source.connect(a.analyser)),a.timerID=setInterval(function(){a.props.recordingState===x.RECORDING&&a._onRefreshVisualizer()},F)):n&&null==r&&a.setState(function(e){return Object(c.a)({},e,{audioArray:[]})},function(){console.log("WHY"),a._draw()}),t.canvasSize.width<0&&a.state.canvasSize.width>0&&a.canvas.current.addEventListener("mousemove",function(e){var t=e.target.getBoundingClientRect();a.setState({mousePosition:{x:e.clientX-t.left,y:e.clientY-t.top}})})},a.componentWillUnmount=function(){clearInterval(a.timerID),cancelAnimationFrame(a._draw),a.analyser&&a.analyser.disconnect(),a.source&&a.source.disconnect()},a.stop=function(){clearInterval(a.timerID)},a._onRefreshVisualizer=function(){a.analyser.getByteFrequencyData(a.dataArray);for(var e=0,t=0;t<a.dataArray.length;t++)e+=a.dataArray[t];var n=e/a.dataArray.length;a.setState(function(e){var t=Object(s.a)(e.audioArray);return e.audioArray.length>=Math.floor(e.canvasSize.width/G)&&t.shift(),{audioArray:[].concat(Object(s.a)(t),[{amplitude:n,timestamp:a.props.elapsedTimeMs,x:Math.floor(G*e.audioArray.length)}]),totalArray:[].concat(Object(s.a)(e.totalArray),[{amplitude:n,timestamp:a.props.elapsedTimeMs,x:Math.floor(G*e.audioArray.length)}])}})},a._draw=function(){var e=a.canvas.current;if(e){var t=e.height,n=e.width,r=a.state.audioArray.length,i=e.getContext("2d");i.clearRect(0,0,n,t),0===r?a.state.totalArray.forEach(function(e,r){var o=B.getAnnotationsForTimestamp(e.timestamp,a.props.annotations?a.props.annotations:[]),s=2+e.amplitude,c=a.state.canvasSize.width/a.state.totalArray.length,l=.2+s/50,u="rgba(244, 67, 54,"+l+")",d="rgba(255, 255, 255, "+o.length/5+")",m={x:n-(a.state.totalArray.length-r)*c,y:t/2-s,width:.6*c,height:2*s};console.log(m);a.state.mousePosition.x>m.x&&a.state.mousePosition.x;i.fillStyle=o.length>0?d:u,i.fillRect(m.x,m.y,m.width,m.height)}):a.state.audioArray.forEach(function(e,o){var s=B.getAnnotationsForTimestamp(e.timestamp,a.props.annotations?a.props.annotations:[]),c=2+e.amplitude,l=.2+c/50,u="rgba(244, 67, 54,"+l+")",d="rgba(255, 255, 255, "+s.length/5+")",m={x:n-(r-o)*G,y:t/2-c,width:.6*G,height:2*c};a.state.mousePosition.x>m.x&&a.state.mousePosition.x;i.fillStyle=s.length>0?d:u,i.fillRect(m.x,m.y,m.width,m.height)})}},a.state={audioArray:[],mousePosition:{x:0,y:0},canvasSize:{width:-1,height:-1},totalArray:[]},a.canvas=r.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return null!=this.state.canvasSize&&r.a.createElement(U.a,{bounds:!0,margin:!0,onResize:function(t){e.setState({canvasSize:t.bounds})}},function(a){var n=a.measureRef;return r.a.createElement("div",{ref:n,className:t.Visualizer},r.a.createElement("canvas",{className:t.Canvas,ref:e.canvas,height:e.state.canvasSize.height,width:e.state.canvasSize.width}))})}}]),t}(n.Component),H=Object(v.a)({Canvas:{display:"block"},Visualizer:{width:"80%",height:"200px",margin:"auto"}})(z),W=function(){function e(t,a){var n=this;Object(l.a)(this,e),this.start=function(){n._recordingStartTimeMs=Date.now(),n._recordingInterval=setInterval(function(){n._onIntervalTick&&n._onIntervalTick(n.getElapsedTimeMs())},n._interval&&n._interval)},this.pause=function(){n._currentRecordingPausedStartTime=Date.now(),n._recordingPausedPeriods[n._currentRecordingPausedStartTime]=null},this.resume=function(){n._recordingPausedPeriods[n._currentRecordingPausedStartTime]=Date.now(),n._currentRecordingPausedStartTime=null},this.stop=function(){clearInterval(n._recordingInterval),n._recordingInterval=null,n._recordingStartTimeMs=null,n._recordingPausedPeriods={},n._currentRecordingPausedStartTime=null},this.isStarted=function(){return n._recordingInterval},this.getElapsedTimeMs=function(){var e=Date.now(),t=Object.keys(n._recordingPausedPeriods).map(function(t){return(n._recordingPausedPeriods[t]||e)-t}).reduce(function(e,t){return e+t},0);return e-n._recordingStartTimeMs-t},this._recordingInterval=null,this._recordingStartTimeMs=null,this._recordingPausedPeriods={},this._currentRecordingPausedStartTime=null,this._onIntervalTick=t,this._interval=a}return Object(u.a)(e,[{key:"setOnIntervalTick",value:function(e){this._onIntervalTick=e}}]),e}(),L=a(51),q=a.n(L),V=function(e){function t(e){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).call(this,"Action Item",e,1e4))}return Object(h.a)(t,e),t}(function e(t,a,n){var r=this;Object(l.a)(this,e),this.getStartTimeMs=function(){return r.timestamp-r.totalDuration/2},this.getEndTimeMs=function(){return r.timestamp+r.totalDuration/2},this.id=q.a.v4(),this.timestamp=a,this.totalDuration=n,this.type=t}),J=a(112),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){var e=document.createElement("script");e.src="https://cdn.webrtc-experiment.com/EBML.js",e.async=!0,document.body.appendChild(e)},a.componentDidUpdate=function(){var e=Object(f.a)(g.a.mark(function e(t,n){var r,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.state.recordingState.compareToPrevious(n.recordingState),e.t0=r,e.next=e.t0===_.START?4:e.t0===_.STOP?13:23;break;case 4:return e.next=6,a._requestPermission();case 6:return i=e.sent,a._recordingTimeManager.start(),a._recorder=new b.RecordRTCPromisesHandler(i,{type:"audio"}),e.next=11,a._recorder.startRecording();case 11:return a.setState({recordingState:x.RECORDING,stream:i}),e.abrupt("break",24);case 13:return e.next=15,a._recorder.stopRecording();case 15:return e.t1=b.getSeekableBlob,e.next=18,a._recorder.getBlob();case 18:return e.t2=e.sent,e.t3=function(e){a._recordingTimeManager.stop(),a._audioAnalyzer.stop(),a.props.onAudioUrlAdded(URL.createObjectURL(e))},(0,e.t1)(e.t2,e.t3),a.setState({recordingState:x.OFF,stream:null}),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a._onMsIntervalTick=function(e){a.setState({elapsedTimeMs:e})},a._toggleRecording=Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.state.recordingState===x.RECORDING?a.setState({recordingState:a.state.recordingState.stop()}):a.state.recordingState===x.OFF&&a.setState({recordingState:a.state.recordingState.start()});case 1:case"end":return e.stop()}},e)})),a._requestPermission=Object(f.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)})),a._onAnnotationButtonClicked=function(){if(a.state.recordingState===x.RECORDING){var e=new V(a.state.elapsedTimeMs);a.props.onAnnotationAdded(e)}},a.state={recordingState:x.OFF,elapsedTimeMs:0,stream:null},a._recordingTimeManager=new W(a._onMsIntervalTick,10),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(J.a,{display:"flex",flexDirection:"column",justifyContent:"center",className:t.Container},r.a.createElement(J.a,null,r.a.createElement("h1",{className:t.Duration},B.secondsToTimeString(this.state.elapsedTimeMs/1e3,!1))),r.a.createElement(J.a,null,r.a.createElement(M,{onClick:this._toggleRecording,recordingState:this.state.recordingState})),r.a.createElement(J.a,{flexGrow:1,justifyContent:"center",display:"flex",flexDirection:"column"},r.a.createElement(J.a,null,r.a.createElement(H,{ref:function(t){t&&(e._audioAnalyzer=t)},recordingState:this.state.recordingState,stream:this.state.stream,annotations:this.props.annotations,elapsedTimeMs:this.state.elapsedTimeMs}))),r.a.createElement(J.a,{className:t.ActionButton},r.a.createElement(O,{name:"Action Item",onAnnotationButtonClicked:this._onAnnotationButtonClicked,annotationCount:this.props.annotations.length,disabled:null==this.state.stream})))}}]),t}(n.Component),X=Object(v.a)(function(e){return{Duration:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},Visualizer:{width:"80%",height:"20%"},Container:{height:"100%"},Annotation:{padding:"8px"},AnnotationIcon:{height:"30px",width:"30px",marginRight:"2px"},ActionButton:{marginBottom:"40px"}}})(Y),$=a(52),K=a.n($),Q=a(105),Z=a(109),ee=a(108),te=a(106),ae=a(107),ne=a(53),re=a.n(ne),ie=a(54),oe=a.n(ie),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onAnnotationPlayed=function(e){a._audioPlayer&&(a._audioPlayer.current.audioEl.currentTime=e.getStartTimeMs()/1e3,a._audioPlayer.current.audioEl.play())},a._audioPlayer=r.a.createRef(),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.audioUrl;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:a.Header},"Summary"),r.a.createElement(K.a,{ref:this._audioPlayer,className:a.AudioPlayer,controls:!0,src:n}),r.a.createElement(E.a,{color:"primary",className:a.ResetButton,"aria-label":"reset",onClick:this.props.onReset},r.a.createElement(re.a,{className:a.RecordingButtonLabel})),r.a.createElement(Q.a,null,r.a.createElement(te.a,{className:a.TableHeader},r.a.createElement(ae.a,null,r.a.createElement(ee.a,{className:a.TableHeader}),r.a.createElement(ee.a,{className:a.TableHeader,align:"right"},"Type"),r.a.createElement(ee.a,{align:"right",className:a.TableHeader},"Start Time"),r.a.createElement(ee.a,{align:"right",className:a.TableHeader},"End Time"),r.a.createElement(ee.a,{align:"right",className:a.TableHeader},"Duration (s)"))),r.a.createElement(Z.a,null,this.props.annotations&&this.props.annotations.map(function(t){return r.a.createElement(ae.a,{key:t.id},r.a.createElement(ee.a,{component:"th",scope:"row",className:a.TableCell},r.a.createElement(E.a,{size:"small",onClick:function(){e._onAnnotationPlayed(t)}},r.a.createElement(oe.a,null))),r.a.createElement(ee.a,{component:"th",scope:"row",align:"right",className:a.TableCell},t.type),r.a.createElement(ee.a,{align:"right",className:a.TableCell},B.secondsToTimeString(t.getStartTimeMs()>0?t.getStartTimeMs()/1e3:0,!0)),r.a.createElement(ee.a,{align:"right",className:a.TableCell},B.secondsToTimeString(t.getEndTimeMs()/1e3,!0)),r.a.createElement(ee.a,{align:"right",className:a.TableCell},t.totalDuration/1e3))}))))}}]),t}(n.Component),ce=(Object(v.a)({Header:{margin:0,padding:"30px",textAlign:"center",color:"#fff",fontSize:50,fontWeight:"lighter"},TableHeader:{color:"#fff",fontSize:20,fontWeight:"lighter"},TableCell:{color:"#fff",fontWeight:"lighter"},ResetButton:{position:"absolute",top:"0px",left:"0px",margin:"30px",color:"#fff"},AudioPlayer:{margin:"20px",width:"80%"}})(se),a(37)),le=a(110),ue=a(55),de=a(111),me=Object(ue.a)({palette:{primary:{main:"#e53935"},secondary:ce.a,type:"dark"}}),he={App:{height:"100%",textAlign:"center",background:me.palette.background.default}},pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._onAudioUrlAdded=function(e){a.setState({audioUrl:e})},a._onAnnotationAdded=function(e){a.setState(function(t){return console.log(t),Object(c.a)({},t,{annotations:[].concat(Object(s.a)(t.annotations),[e])})})},a._onReset=function(){a.setState({audioUrl:null,annotations:[]})},a.state={audioUrl:null,annotations:[]},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(le.a,{theme:me},r.a.createElement(de.a,{className:e.App,maxWidth:!1},r.a.createElement(X,{annotations:this.state.annotations,onAudioUrlAdded:this._onAudioUrlAdded,onAnnotationAdded:this._onAnnotationAdded})))}}]),t}(n.Component),ge=Object(v.a)(he)(pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[61,1,2]]]);
//# sourceMappingURL=main.2a92082c.chunk.js.map